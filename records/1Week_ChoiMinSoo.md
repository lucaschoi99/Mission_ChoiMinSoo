## Title: [1Week] 최민수

### 미션 요구사항 분석 & 체크리스트

---
**[필수미션 - 호감상대 삭제]**

️✔ 삭제 기능 URL에 매핑할 메서드를 LikeInfoController 구현

️️✔ `@PreAuthorized` 사용하여 로그인이 필요한 메서드임을 명시

✔ `@PathVariable` 사용하여 삭제할 데이터를 명확히

️✔ 로그인 한 사용자에게 삭제 권한이 있는지를 체크

️✔ `정상적인 삭제`, `권한 없음`, `잘못된 접근`에 대한 메세지를 세분화해서 표현


**[선택미션 - 구글 로그인]**

️✔ 카카오 로그인 기능 구현 시 `application.yml` security 설정을 어떻게 했는지 파악

️✔ Google Cloud Console 에 로그인 해 `OAuth2.0 client ID`와 `API 키 발급`

️✔ 구글 로그인 성공 시 `login.html` 템플릿에서 구글 로그인 버튼 완성됐음을 텍스트 수정


###1주차 미션 요약

---

**[접근 방법]**

**(필수 미션 - 호감상대 삭제 기능)** 은 로직은 간단했지만, `예외 처리`에 신경을 써서 구현해야 한다고 생각했습니다.

즉, 로그인이 필요한 기능임을 명시하기 위해 메서드 어노테이션 `@PreAuthorized` 로 막고,
내부 로직에서도 로그인 된 사용자가 목록을 삭제할 권한이 있는지 체크하는 과정이 필요했습니다.

또한, 로그인 하지 않은 유저나 로그인 했지만 권한이 없는 사용자가 URL을 통해서 직접 들어올 때,
`Exception을 발생시키지 않고 정상적으로 처리 되도록` redirectWithMsg 메서드를 통해 명시했습니다.

---
**(선택미션 - 구글 로그인)** 은 `카카오 로그인이 어떻게 이루어졌는지` 살펴보면 간단히 해결할 수 있었습니다.

다만, 직접 `Google Cloud Console` 웹페이지로 들어가 프로젝트에 `API service를 생성`하고 `redirect URI`,
`Client ID` 등을 입력하고 `application.yml` 파일에 설정하는 과정이 필요했습니다.

저 또한 `진행 중 헤맸던 부분`이 있었는데, 구글 로그인 계정을 선택하고 redirect 될 때 세션만 등록이 되고
실제로 member 데이터가 추가 되지 않는 오류를 겪었습니다.

이 부분은 구글링과 ChatGPT로 검색을 해서 해결을 했는데, 그 이유는 `application.yml` 설정에서
구글 등록시 `scope` 를 명시하지 않고 빈칸으로 남겨두었기 때문이었습니다.

scope 필드를 다음과 같이 수정하니 정상적으로 동작했습니다.
```yml
registration:
  google:
    client-id: <your-client-id>
    client-secret: <your-client-secret>
    scope:
      - email
      - profile
```
---

**[특이사항]**

구현 과정에서 `findById` 와 같이 레포지토리를 참조해서 객체를 가지고 오는 로직이 모두 Optional로 구현이 되어있어,
이를 체크하는 과정이 항상 서비스 코드에 들어가야 했던 점이 마음에 걸렸습니다.

추후 리팩토링을 할 때에는, 아예 해당 메서드에서 객체를 가지고 올때 예외처리를 해서 `Optional을 벗기고 실제 객체를
가지고 올 수 있는 방법`을 생각해 봐야 겠습니다.

**참고: [Refactoring]**

    - Service 코드에서 레포지토리를 참조해 객체를 가지고 오는 `findBy~` 메서드를 예외 처리할 수 있는 방법
    - 다른 메서드를 최대한 바꾸지 않고, 간결한 방향으로 리팩토링 할 것.
    - 테스트 코드에 또한 최대한 영향이 가지 않도록 할 것.
